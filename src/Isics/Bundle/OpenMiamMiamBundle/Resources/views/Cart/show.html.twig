{#
 # This file is part of the OpenMiamMiam project.
 # (c) Isics <contact@isics.fr>
 #
 # This source file is subject to the AGPL v3 license that is bundled
 # with this source code in the file LICENSE.
 #}
{% embed 'IsicsOpenMiamMiamBundle:Branch:base.html.twig' with {'branch': branch} %}
    {% block content %}
        {{ form_start(form) }}
            {{ form_errors(form) }}
            <table class="table table-bordered table-striped table-cart-products">
                <thead>
                    <tr>
                        <th>{{ 'product'|trans }}</th>
                        <th>{{ 'price'|trans }}</th>
                        <th>{{ 'quantity'|trans }}</th>
                        <th>{{ 'total'|trans }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in form.items %}
                        <tr>
                            <td>
                                <a href="{{ path('open_miam_miam_branch_product', {'branch_slug': branch.slug, 'category_slug': item.vars.data.product.category.slug, 'product_slug': item.vars.data.product.slug}) }}">
                                    {{ item.vars.data.product.name }}
                                </a>
                            </td>
                            <td>{{ item.vars.data.product.price|number_format_currency(open_miam_miam.currency) }}</td>
                            <td>
                                {{ form_widget(item.product) }}
                                {{ form_errors(item.quantity) }}
                                {{ form_widget(item.quantity, {'attr': {'class': 'form-control input-quantity'}}) }}
                            </td>
                            <td>{{ item.vars.data.total|number_format_currency(open_miam_miam.currency) }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <th colspan="3">{{ 'total'|trans }}</th>
                        <td>{{ form.vars.data.total|number_format_currency(open_miam_miam.currency) }}</td>
                    </tr>
                </tfoot>
            </table>
        {{ form_end(form) }}

        <p>
            <a href="{{ path('open_miam_miam_branch_homepage', {'branch_slug': branch.slug}) }}">
                Keep shoping
            </a>
        </p>
        <a href="{{ path('open_miam_miam_sales_order_confirm', {'branch_slug': branch.slug}) }}" class="btn btn-primary btn-lg">
            <span class="glyphicon glyphicon-shopping-cart"></span>
            {{ 'checkout'|trans }}
        </a>
    {% endblock %}
{% endembed %}

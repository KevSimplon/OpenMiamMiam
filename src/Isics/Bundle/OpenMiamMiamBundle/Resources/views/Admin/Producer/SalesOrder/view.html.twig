{#
 # This file is part of the OpenMiamMiam project.
 # (c) Isics <contact@isics.fr>
 #
 # This source file is subject to the AGPL v3 license that is bundled
 # with this source code in the file LICENSE.
 #}
{% extends 'IsicsOpenMiamMiamBundle:Admin:admin.html.twig' %}

{% block content %}
    {% set order=producerSalesOrder.salesOrder %}
    <h1>{{ 'admin.producer.sales_orders.view.title'|trans({'%ref%': order.ref}) }} <small>- {{ order.date|format_datetime }}</small></h1>

    <div class="alert alert-info">
        {{ 'admin.producer.sales_orders.view.notice'|trans }}
    </div>

    {% include 'IsicsOpenMiamMiamBundle:Admin:Producer\\SalesOrder\\salesOrderHeader.html.twig' %}

    {% if producerSalesOrder.salesOrderRows|length > 0 %}
        <div class="table-responsive">
            <table class="table table-bordered table-striped table-producer-sales-order">
                <thead>
                <tr>
                    <th>{{ 'admin.producer.sales_orders.view.sales_order_row.ref'|trans }}</th>
                    <th>{{ 'admin.producer.sales_orders.view.sales_order_row.product'|trans }}</th>
                    <th>{{ 'admin.producer.sales_orders.view.sales_order_row.unit_price'|trans }}</th>
                    <th>{{ 'admin.producer.sales_orders.view.sales_order_row.quantity'|trans }}</th>
                    <th>{{ 'admin.producer.sales_orders.view.sales_order_row.total'|trans }}</th>
                </tr>
                </thead>
                <tbody>
                {% for salesOrderRow in producerSalesOrder.salesOrderRows %}
                    <tr>
                        <td>{{ salesOrderRow.ref }}</td>
                        <td>{{ salesOrderRow.name }}</td>
                        <td>{{ salesOrderRow.unitPrice|number_format_currency(open_miam_miam.currency) }}</td>
                        <td>{{ salesOrderRow.quantity }}</td>
                        <td>{{ salesOrderRow.total|number_format_currency(open_miam_miam.currency) }}</td>
                    </tr>
                {% endfor %}
                </tbody>
                <tfoot>
                <tr>
                    <th colspan="4">{{ 'admin.producer.sales_orders.form.total'|trans }}</th>
                    <td>{{ producerSalesOrder.total|number_format_currency(open_miam_miam.currency) }}</td>
                </tr>
                </tfoot>
            </table>
        </div>

        <a href="{{ path('open_miam_miam.admin.producer.sales_order.list', {'id': producer.id}) }}" class="pull-right">{{ 'admin.return'|trans }}</a>
    {% else %}
        {% include 'IsicsOpenMiamMiamBundle:Admin:empty.html.twig' with {'message': 'admin.producer.sales_orders.sales_order_rows.no'|trans} %}
    {% endif %}

    {% include 'IsicsOpenMiamMiamBundle:Admin:activityStream.html.twig' %}
{% endblock %}
